function UserHasRole(roleName){var serverUrl=Xrm.Page.context.getServerUrl(),oDataEndpointUrl=Xrm.Page.context.prependOrgName("/XRMServices/2011/OrganizationData.svc/"),service,requestResults,i,userRole;if(oDataEndpointUrl+="RoleSet?$top=1&$filter=Name eq '"+roleName+"'",service=GetRequestObject(),service!=null&&(service.open("GET",oDataEndpointUrl,!1),service.setRequestHeader("X-Requested-Width","XMLHttpRequest"),service.setRequestHeader("Accept","application/json, text/javascript, */*"),service.send(null),requestResults=eval("("+service.responseText+")").d,requestResults!=null&&requestResults.results.length==1)){var role=requestResults.results[0],id=role.RoleId,currentUserRoles=Xrm.Page.context.getUserRoles();for(i=0;i<currentUserRoles.length;i++)if(userRole=currentUserRoles[i],GuidsAreEqual(userRole,id))return!0}return!1}function GetRequestObject(){if(window.XMLHttpRequest)return new window.XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(n){return null}}function GuidsAreEqual(n,t){return n==null||t==null?!1:n.replace(/[{}]/g,"").toLowerCase()==t.replace(/[{}]/g,"").toLowerCase()}